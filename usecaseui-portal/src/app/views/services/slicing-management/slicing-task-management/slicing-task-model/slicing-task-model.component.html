<nz-modal [nzVisible]="showDetail" nzWidth="85%" [nzTitle]="moduleTitle" (nzOnCancel)="handleCancel()"
  (nzOnOk)="handleOk()">
  <nz-list class="taskmodel_list" [nzDataSource]="checkDetail" nzBordered [nzHeader]="'配置审核详情：'" [nzFooter]="null"
    [nzRenderItem]="checkItem">
    <ng-template #checkItem let-check>
      <nz-list-item nz-row nzType="flex" nzJustify="start" [nzGutter]="8">
        <div nz-col nzSpan="10">
          <span>Task ID： {{ check.task_id }}</span>
        </div>
        <div nz-col nzSpan="8">
          <span>Task Name： {{ check.task_name }}</span>
        </div>
        <div nz-col nzSpan="6">
          <span>S-NSSAI：{{ check.service_snssai }}</span>
        </div>
      </nz-list-item>
      <nz-list-item nz-row nzType="flex" nzJustify="start" [nzGutter]="8">
        <div nz-col nzSpan="10">
          <span>Arrived Time： {{ check.create_time | date: 'yyyy-MM-dd HH:mm:ss' }}</span>
        </div>
        <div nz-col nzSpan="8">
          <span>Status： {{ check.processing_status }}</span>
        </div>
      </nz-list-item>
    </ng-template>
  </nz-list>

  <nz-list class="taskmodel_list" [nzDataSource]="businessRequirement" nzBordered [nzHeader]="'业务需求信息：'"
    [nzFooter]="null" [nzRenderItem]="businessItem">
    <ng-template #businessItem let-item>
      <nz-list-item  nz-row nzType="flex" nzJustify="start" [nzGutter]="8" *ngFor="let list of businessList ">
        <div nz-col [nzSpan]="list.length === 1 ? '24' : '8'" *ngFor="let ite of list">
          <span class="ant-typography">{{ ite.title }} : &nbsp;{{ item[ite.key] }}</span>
        </div>
      </nz-list-item>
    </ng-template>
  </nz-list>

  <nz-list class="taskmodel_list" [nzDataSource]="NSTinfo" nzBordered [nzHeader]="'匹配NST信息：'" [nzFooter]="null"
    [nzRenderItem]="taskItem">
    <ng-template #taskItem let-item>
      <nz-list-item nz-row nzType="flex" nzJustify="start" [nzGutter]="8">
        <div nz-col nzSpan="12">
          <span>NST ID： {{ item.nst_id }}</span>
        </div>
        <div nz-col nzSpan="12">
          <span>NST Name： {{ item.nst_name }}</span>
        </div>
      </nz-list-item>
    </ng-template>
  </nz-list> 

  <div>
    <nz-list class="taskmodel_list" nzBordered [nzHeader]="'匹配共享切片实例：'" [nzFooter]="null">
      <nz-list-item nz-row nzType="flex" nzJustify="start" [nzGutter]="8">
        <div nz-col nzSpan="12">
          切片实例 ID：
          <nz-select nzShowSearch [(ngModel)]="selectedServiceId" (ngModelChange)="slicingInstanceChange()"
            (nzOpenChange)="getSlicingData($event)">
            <nz-option *ngFor="let item of slicingInstances" [nzValue]="item.service_instance_id"
              [nzLabel]="item.service_instance_id"></nz-option>
          </nz-select>
        </div>
        <div nz-col nzSpan="8">
          切片实例名称：{{ selectedServiceName }}
        </div>
        <div nz-col nzSpan="4">
          <button nz-button nzType="primary" (click)="resetSlicingInstance()">
            <i nz-icon class="anticon anticon-delete"></i>
          </button>
        </div>
      </nz-list-item>
      <nz-list-item nz-row nzType="flex" nzJustify="start" [nzGutter]="8">
        <p class="listitem_subtitle" nz-col nzSpan="24">匹配的共享切片子网实例：</p>
        <nz-card *ngFor="let item of slicingSubnet" nzType="inner" nz-col nzSpan="24" [nzTitle]="item.title">
          <div nz-row [nzGutter]="8">
            <div nz-col nzSpan="12">
              切片子网实例 ID：
              <nz-select nzShowSearch [(ngModel)]="item.slicingId" (ngModelChange)="slicingSubnetChange(item)"
                (nzOpenChange)="getSubnetInstances($event, item)" [nzDisabled]="isDisabled">
                <nz-option *ngFor="let item of item.instances" [nzValue]="item.service_instance_id"
                  [nzLabel]="item.service_instance_id"></nz-option>
              </nz-select>
            </div>
            <div nz-col nzSpan="8">
              切片子网实例名称：{{item.slicingName}}
            </div>
            <div nz-col nzSpan="4">
              <button nz-button nzType="primary" (click)="restSubnetInstance(item)" [disabled]='isDisabled'
                [attr.disabled]='isDisabled?true:undefined'>
                <i nz-icon class="anticon anticon-delete"></i>
              </button>
              <button nz-button nzType="primary" (click)="showParamsModel(item)">
                <i nz-icon class="anticon anticon-setting" nzTheme="outline"></i>
              </button>
            </div>
          </div>
        </nz-card>
      </nz-list-item>
    </nz-list>
  </div>
  <app-subnet-params-model [showModel]="isShowParams" [detailData]="params" [title]="paramsTitle"
    (cancel)="isShowParams=$event"></app-subnet-params-model>

</nz-modal>