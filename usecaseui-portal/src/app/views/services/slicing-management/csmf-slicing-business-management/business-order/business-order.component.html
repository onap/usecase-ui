<nz-spin nzTip='Loading...' [nzSpinning]="isSpinning">
    <nz-modal [(nzVisible)]="showModel" nzTitle="Create Communication Service" (nzOnCancel)="handleCancel()"
        (nzOnOk)="handleOk()" nzWidth="80%">
        <div class="subnet_params_container">
            <form nz-form>
                <nz-form-item *ngFor="let item of comunicationFormItems; let i = index">
                    <nz-form-label [nzSpan]="6" [nzRequired]="item.required" [nzFor]=" item.key">
                        {{ item.title }}
                    </nz-form-label>
                    <nz-form-control [nzSpan]="15">
                        <input nz-input nz-tooltip [id]="item.key" [name]="item.key"
                            [(ngModel)]="slicing_order_info[item.key]"
                            [ngClass]="{'error-input-border':validateRulesShow[i] === true}"
                            *ngIf=" item.type === 'input'&&!item.scoped "
                            [placeholder]="item.placeholder?item.placeholder:''"
                            (blur)="item.required?this.Util.validator(item.title,item.key,slicing_order_info[item.key],i,rulesText,validateRulesShow):this.Util.validator()" />
                        <nz-tooltip [nzTitle]="tooltipText" [nzPlacement]="'right'" [nzTrigger]="'focus'">
                            <input nz-input nz-tooltip [id]="item.key" [name]="item.key" *ngIf="item.scoped"
                                [(ngModel)]="slicing_order_info[item.key]"
                                [ngClass]="{'error-input-border':validateRulesShow[i] === true}"
                                (blur)="this.Util.validator(item.title,item.key,slicing_order_info[item.key],i,rulesText,validateRulesShow)"
                                (focus)="changeTooltipText(item.title)" />
                        </nz-tooltip>
                        <nz-radio-group [name]="item.key" [(ngModel)]="slicing_order_info[item.key]"
                            *ngIf="item.type === 'radio'">
                            <label nz-radio [nzValue]="option.key" *ngFor="let option of item.options">
                                {{ option.title }}
                            </label>
                        </nz-radio-group>
                        <nz-select [name]="item.key" [(ngModel)]="slicing_order_info[item.key]"
                            *ngIf="item.type === 'select'">
                            <nz-option [nzValue]="option.key" [nzLabel]="option.title"
                                *ngFor="let option of item.options">
                            </nz-option>
                        </nz-select>
                        <nz-form-explain *ngIf="item.type === 'input' && validateRulesShow[i]" class="validateRules">
                            {{rulesText[i]}}
                        </nz-form-explain>
                    </nz-form-control>

                    <div *ngIf="item.type === 'city-select'">
                        <div *ngFor="let area of areaList; let i = index">
                            <nz-form-control [nzSpan]="!ind ? 3 : 4" [nzOffset]="i && !ind ? 6 : 0"
                                class="subnet_params_area" *ngFor="let item of area; let ind = index">
                                <nz-select [(ngModel)]="item.selected" [name]="'area' + i + ind"
                                    (nzOpenChange)="handleChange(area, item)"
                                    (ngModelChange)=" handleChangeSelected(area, item) ">
                                    <nz-option [nzValue]="op.name" [nzLabel]="op.name" *ngFor="let op of item.options">
                                    </nz-option>
                                </nz-select>
                            </nz-form-control>
                            <nz-form-control [nzSpan]="1" [nzOffset]="1">
                                <button nz-button nzType="primary" nzSize="small" class="subnet_params_button"
                                    *ngIf="!i" (click)="creatAreaList()">
                                    <i nz-icon class="anticon anticon-plus subnet_params_icon"></i>
                                </button>
                                <button nz-button nzType="primary" nzSize="small" class="subnet_params_button" *ngIf="i"
                                    (click)="deleteAreaList(i)">
                                    <i nz-icon class="anticon anticon-minus subnet_params_icon"></i>
                                </button>
                            </nz-form-control>
                        </div>
                    </div>
                </nz-form-item>
            </form>
        </div>
    </nz-modal>
</nz-spin>